<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>iLovePDF ‚Äì Offline (Open SPA)</title>
  <meta name="description" content="Offline PDF tools: merge, split, organize, compress, convert images to/from PDF. PWA ‚Äì works offline after first load." />
  <link rel="manifest" href="./manifest.webmanifest">
  <meta name="theme-color" content="#c11e4a" />
  <link rel="icon" href="./assets/icons/icon-192.png" />
  <link rel="stylesheet" href="./styles.css" />
  <script>
    // Register service worker if supported
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => navigator.serviceWorker.register('./sw.js'));
    }
  </script>
</head>
<body>
  <header class="app-header">
    <div class="brand">
      <span class="heart">‚ù§</span>
      <span class="brand-text">PDF Tools</span>
      <small class="tag">offline</small>
    </div>
    <nav class="nav">
      <button class="tab-btn active" data-tab="merge">Merge</button>
      <button class="tab-btn" data-tab="split">Split</button>
      <button class="tab-btn" data-tab="organize">Organize</button>
      <button class="tab-btn" data-tab="compress">Compress</button>
      <button class="tab-btn" data-tab="img2pdf">Images ‚Üí PDF</button>
      <button class="tab-btn" data-tab="pdf2img">PDF ‚Üí Images</button>
      <a class="install" id="installPWA" title="Install app">‚ûï Install</a>
    </nav>
  </header>

    <h1>
        Play Chess with Stockfish
        <br/>
        <span style="font-size: 14px; color: #666;">v17 WASM</span>
    </h1>
   
	 
    <div class="links">
        <a href="https://stockfishchess.org/">Credits</a>
        <a href="https://chatgpt.com/share/6781f28b-12f8-8008-8fc6-6d1e409b65be">ChatGPT</a>
    </div>
    
    <div id="board"></div>
    <div id="status">Your move!</div>
	
	
  <main class="container">
    <!-- MERGE -->
    <section class="tab active" id="tab-merge">
      <h2>Merge PDFs</h2>
      <div class="panel">
        <div class="dropzone" id="mergeDrop">Drop PDFs here or click to select
          <input type="file" id="mergeFiles" accept="application/pdf" multiple />
        </div>
        <div id="mergeList" class="file-list"></div>
        <div class="actions">
          <label>Filename: <input id="mergeOutName" value="merged.pdf" /></label>
          <button id="mergeUp">‚¨ÜÔ∏è Move Up</button>
          <button id="mergeDown">‚¨áÔ∏è Move Down</button>
          <button id="mergeRemove">üóë Remove</button>
          <button class="primary" id="mergeGo">Merge & Download</button>
        </div>
      </div>
    </section>

    <!-- SPLIT -->
    <section class="tab" id="tab-split">
      <h2>Split PDF</h2>
      <div class="panel">
        <div class="dropzone" id="splitDrop">Drop a PDF or click to select
          <input type="file" id="splitFile" accept="application/pdf" />
        </div>
        <div class="options">
          <label>Page ranges (e.g., 1-3,5,8-): <input id="splitRanges" placeholder="1-3,5" /></label>
        </div>
        <div class="actions">
          <button class="primary" id="splitGo">Extract Ranges</button>
        </div>
        <p class="hint">Tip: Use commas to separate ranges. Use open-ended ranges like <code>8-</code> to go until the end.</p>
      </div>
    </section>

    <!-- ORGANIZE -->
    <section class="tab" id="tab-organize">
      <h2>Organize pages (reorder & rotate)</h2>
      <div class="panel">
        <div class="dropzone" id="orgDrop">Drop a PDF or click to select
          <input type="file" id="orgFile" accept="application/pdf" />
        </div>
        <div id="thumbs" class="thumbs" tabindex="0"></div>
        <div class="actions">
          <button id="rotateLeft">‚Ü∫ Rotate Left</button>
          <button id="rotateRight">‚Üª Rotate Right</button>
          <button class="primary" id="orgExport">Export PDF</button>
        </div>
      </div>
    </section>

    <!-- COMPRESS -->
    <section class="tab" id="tab-compress">
      <h2>Compress PDF (rasterize)</h2>
      <div class="panel">
        <div class="dropzone" id="cmpDrop">Drop a PDF or click to select
          <input type="file" id="cmpFile" accept="application/pdf" />
        </div>
        <div class="options">
          <label>Quality: 
            <select id="cmpQuality">
              <option value="low">Low (smallest, lowest quality)</option>
              <option value="medium" selected>Medium</option>
              <option value="high">High (largest, best quality)</option>
            </select>
          </label>
        </div>
        <div class="actions">
          <label>Filename: <input id="cmpOutName" value="compressed.pdf" /></label>
          <button class="primary" id="cmpGo">Compress & Download</button>
        </div>
        <p class="hint">Note: This method rasterizes pages to images to reduce size. Text becomes non-selectable. For best results keep the original for editing.</p>
      </div>
    </section>

    <!-- IMAGES to PDF -->
    <section class="tab" id="tab-img2pdf">
      <h2>Images ‚Üí PDF</h2>
      <div class="panel">
        <div class="dropzone" id="i2pDrop">Drop images (JPG/PNG/WebP) or click to select
          <input type="file" id="i2pFiles" accept="image/*" multiple />
        </div>
        <div class="options">
          <label>Page size:
            <select id="i2pSize">
              <option value="fit" selected>Fit to image</option>
              <option value="A4">A4 (portrait)</option>
              <option value="Letter">US Letter (portrait)</option>
            </select>
          </label>
          <label>Margins (mm): <input id="i2pMargin" type="number" value="10" min="0" max="50" step="1" /></label>
        </div>
        <div class="actions">
          <label>Filename: <input id="i2pOutName" value="images.pdf" /></label>
          <button class="primary" id="i2pGo">Create PDF</button>
        </div>
      </div>
    </section>

    <!-- PDF to Images -->
    <section class="tab" id="tab-pdf2img">
      <h2>PDF ‚Üí Images</h2>
      <div class="panel">
        <div class="dropzone" id="p2iDrop">Drop a PDF or click to select
          <input type="file" id="p2iFile" accept="application/pdf" />
        </div>
        <div class="options">
          <label>Format:
            <select id="p2iFormat">
              <option value="png" selected>PNG</option>
              <option value="jpeg">JPEG</option>
            </select>
          </label>
          <label>Resolution (DPI): <input id="p2iDPI" type="number" value="144" min="72" max="300" /></label>
        </div>
        <div class="actions">
          <button class="primary" id="p2iGo">Export Images (ZIP)</button>
        </div>
        <div id="p2iPreview" class="thumbs"></div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <p>Open-source style demo (no affiliation with iLovePDF). All processing happens in your browser. No uploads.</p>
    <p class="tiny">Dependencies cached for offline use after first load: pdf-lib, pdf.js, jszip.</p>
  </footer>

  <!-- Third-party libs from CDN (cached by service worker after first load) -->
  <script src="https://cdn.jsdelivr.net/npm/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.3.136/pdf.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.3.136/pdf.worker.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

  <!-- App code -->
  <script src="./app.js" type="module"></script>
</body>
</html>
